
<!-- include header -->
<%- include('include/_header') %>
<!-- /include header -->

  <!-- Main Site -->
  <main id="site-main">
    <div class="container">
        <div class="box-nav d-flex justify-between">
           <div class="filter">
               <a href="/app/records"><i class="fas fa-arrow-left"></i> All Records</a>
           </div>
        </div>
        <div class="form-title text-center">
            <h2 class="text-dark">Update Record</h2>
            <span class="text-dark">Use the below form to update a record</span>
        </div>

        <!-- add user form -->
<script>
            $(document).ready(function(){
                $("#update_record").submit(function(event) {
                    event.preventDefault();
                  
                    const unindexed_array = $(this).serializeArray();
                    const data = {};
                  
                    $.map(unindexed_array, function(n, i) {
                      data[n["name"]] = n["value"];
                    });
                  
                    const request1 = {
                      "url": `/app/api/records/${data.id}`,
                      "method": "PUT",
                      "data": data,
                    };
                  
                    $.ajax(request1).done(function(response) {
                      alert("Data Updated Successfully");
                     }).fail(function(err) {
                      alert("Data cannot be empty");
                     });
                  }); 
            });
</script> 
         <!-- form handling -->
 <form action="/app/api/records/" method="post" id="update_record">
    <div class="new_record">
        <div class="form-group">
            <label for="name" class="text">Company Name</label>
            <input type="hidden" name="id" value="<%= record._id %>">
            <input type="text" name="company" value="<%= record.company%>" placeholder="ABC Company">
        </div>
        <div class="form-group">
            <label for="website" class="text">Website</label>
            <input type="text" name="website" value="<%= record.website%>" placeholder="www.example.com">
        </div>
        <div class="form-group">
            <label for="size" class="text">Size</label>
            <input type="text" name="size" value="<%= record.size%>" placeholder="">
        </div>

        <div class="form-group">
            <label for="revenue" class="text">Revenue</label>
            <input type="text" name="revenue" value="<%= record.revenue%>" placeholder="">
        </div>
        <div class="form-group">
            <label for="hq" class="text">HeadQuarters</label>
            <input type="text" name="hq" value="<%= record.hq%>" placeholder="">
        </div>
        <div class="form-group">
            <label for="sales" class="text">Sales Contact</label>
            <input type="text" name="sales" value="<%= record.sales%>" placeholder="">
        </div>
        <div class="form-group">
            <label for="first" class="text">First Priority</label>
            <input type="text" name="first" value="<%= record.first%>" placeholder="">
        </div>
        <div class="form-group">
            <label for="second" class="text">Second Priority</label>
            <input type="text" name="second" value="<%= record.second%>" placeholder="">
        </div>
        <div class="form-group">
            <label for="third" class="text">Third Priority</label>
            <input type="text" name="third" value="<%= record.third%>" placeholder="">
        </div>
        <div class="form-group">
            <label for="fourth" class="text">Fourth Priority</label>
            <input type="text" name="fourth" value="<%= record.fourth%>" placeholder="">
        </div>
        <div class="form-group">
            <label for="priority" class="text">Priority</label>
            <input type="text" name="priority" value="<%= record.priority%>" placeholder="">
        </div>
        <div class="form-group">
            <label for="comments" class="text">Comments</label>
            <input type="text" name="comments" value="<%= record.comments%>" placeholder="">
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-block btn-primary btn-lg">Save</button>
        </div>

    </div>
</form>
       
    </div>
</main>
<!-- /Main Site -->

<!-- include footer -->
<%- include('include/_footer') %>
<!-- /include footer -->
