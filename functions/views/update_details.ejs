
<!-- include header -->
<%- include('include/_header') %>
<!-- /include header -->

  <!-- Main Site -->
  <main id="site-main">
    <div class="container">
        <div class="box-nav d-flex justify-between">
           <div class="filter">
               <a href="/app/details"><i class="fas fa-arrow-left"></i>All details</a>
           </div>
        </div>
        <div class="form-title text-center">
            <h2 class="text-dark">Update details</h2>
            <span class="text-dark">Use the below form to update information</span>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!-- add user form -->
<script>
    $(document).ready(function(){
        $("#update_details").submit(function(event) {
            event.preventDefault();
          
            const unindexed_array = $(this).serializeArray();
            const data = {};
          
            $.map(unindexed_array, function(n, i) {
              data[n["name"]] = n["value"];
            });
          
            const request3 = {
              "url": `/app/api/details/${data.id}`,
              "method": "PUT",
              "data": data,
            };
          
            $.ajax(request3).done(function(response) {
              alert("Data Updated Successfully");
             }).fail(function(err) {
              alert("Data cannot be empty");
             });
          }); 
    });
</script>       
         <!-- form handling -->
 <form action="/app/api/details/" method="post" id="update_details">
    <div class="new_record" id="update_record">
        <div class="form-group">
            <label for="company" class="text">Company Name</label>
            <input type="hidden" name="id" value="<%= details._id %>">
            <input type="text" name="company" value="<%= details.company %>" placeholder="ABC Company">
        </div>
        <div class="form-group">
            <label for="india" class="text">India</label>
            <input type="text" name="india" value="<%= details.india %>" placeholder="Department 1">
        </div>
        <div class="form-group">
            <label for="canada" class="text">Canada</label>
            <input type="text" name="canada" value="<%= details.canada %>" placeholder="Department 2">
        </div>
        <div class="form-group">
            <label for="uk" class="text">UK</label>
            <input type="text" name="uk" value="<%= details.uk %>" placeholder="Department 3">
        </div>
        <div class="form-group">
            <label for="usa" class="text">USA</label>
            <input type="text" name="usa" value="<%= details.usa %>" placeholder="Department 4">
        </div>
        <div class="form-group">
            <label for="person" class="text">Name</label>
            <input type="text" name="person" value="<%= details.person %>" placeholder="John Doe">
        </div>
        <div class="form-group">
            <label for="designation" class="text">Designation</label>
                <input type="text" name="designation" value="<%= details.designation %>" placeholder="Executive">
        </div>
        <div class="form-group">
                <label for="email" class="text">Email</label>
                <input type="text" name="email" value="<%= details.email %>" placeholder="john@example.com">
        </div>
        <div class="form-group">
                <label for="phone" class="text">Phone Number</label>
                <input type="text" name="phone" value="<%= details.phone %>" placeholder="123456789">
        </div>
        <div class="form-group">
                <label for="linkedin" class="text">LinkedIn Profile</label>
                <input type="text" name="linkedin" value="<%= details.linkedin %>" placeholder="">
        </div>
        <div class="form-group">
                <label for="comments" class="text">Comments</label>
                <input type="text" name="comments" value="<%= details.comments %>" placeholder="">
        </div>
        <div class="form-group">
            <button type="submit" class="btn text-light update">Save</button>
        </div>

    </div>
</form>
       
    </div>
</main>
<!-- /Main Site -->

<!-- include footer -->
<%- include('include/_footer') %>
<!-- /include footer -->